{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:\\\\Repository\\\\testapp\\\\node_modules\\\\@babel\\\\runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"C:\\\\Repository\\\\testapp\\\\node_modules\\\\@babel\\\\runtime/helpers/asyncToGenerator\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.destroyModel = exports.fetchCentral = exports.saveCentral = exports.find = exports.sendNewGaiaUrl = void 0;\n\nvar _qs = require(\"qs\");\n\nvar _config = require(\"./config\");\n\nvar sendNewGaiaUrl =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(gaiaURL) {\n    var _ref2, apiServer, url, data, response, _ref3, success, message;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _ref2 = (0, _config.getConfig)(), apiServer = _ref2.apiServer;\n            url = \"\".concat(apiServer, \"/radiks/models/crawl\"); // console.log(url, gaiaURL);\n\n            data = {\n              gaiaURL: gaiaURL\n            };\n            _context.next = 5;\n            return fetch(url, {\n              method: 'POST',\n              body: JSON.stringify(data),\n              headers: new Headers({\n                'Content-Type': 'application/json'\n              })\n            });\n\n          case 5:\n            response = _context.sent;\n            _context.next = 8;\n            return response.json();\n\n          case 8:\n            _ref3 = _context.sent;\n            success = _ref3.success;\n            message = _ref3.message;\n\n            if (success) {\n              _context.next = 13;\n              break;\n            }\n\n            throw new Error(\"Error when saving model: '\".concat(message, \"'\"));\n\n          case 13:\n            return _context.abrupt(\"return\", success);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function sendNewGaiaUrl(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexports.sendNewGaiaUrl = sendNewGaiaUrl;\n\nvar find =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(query) {\n    var _ref5, apiServer, queryString, url, response, data;\n\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _ref5 = (0, _config.getConfig)(), apiServer = _ref5.apiServer;\n            queryString = (0, _qs.stringify)(query, {\n              arrayFormat: 'brackets',\n              encode: false\n            });\n            url = \"\".concat(apiServer, \"/radiks/models/find?\").concat(queryString);\n            _context2.next = 5;\n            return fetch(url);\n\n          case 5:\n            response = _context2.sent;\n            _context2.next = 8;\n            return response.json();\n\n          case 8:\n            data = _context2.sent;\n            return _context2.abrupt(\"return\", data);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function find(_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexports.find = find;\n\nvar saveCentral =\n/*#__PURE__*/\nfunction () {\n  var _ref6 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(data) {\n    var _ref7, apiServer, url, response, _ref8, success;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _ref7 = (0, _config.getConfig)(), apiServer = _ref7.apiServer;\n            url = \"\".concat(apiServer, \"/radiks/central\");\n            _context3.next = 4;\n            return fetch(url, {\n              method: 'POST',\n              body: JSON.stringify(data),\n              headers: new Headers({\n                'Content-Type': 'application/json'\n              })\n            });\n\n          case 4:\n            response = _context3.sent;\n            _context3.next = 7;\n            return response.json();\n\n          case 7:\n            _ref8 = _context3.sent;\n            success = _ref8.success;\n            return _context3.abrupt(\"return\", success);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function saveCentral(_x3) {\n    return _ref6.apply(this, arguments);\n  };\n}();\n\nexports.saveCentral = saveCentral;\n\nvar fetchCentral =\n/*#__PURE__*/\nfunction () {\n  var _ref9 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee4(key, username, signature) {\n    var _ref10, apiServer, queryString, url, response, value;\n\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _ref10 = (0, _config.getConfig)(), apiServer = _ref10.apiServer;\n            queryString = (0, _qs.stringify)({\n              username: username,\n              signature: signature\n            });\n            url = \"\".concat(apiServer, \"/radiks/central/\").concat(key, \"?\").concat(queryString);\n            _context4.next = 5;\n            return fetch(url);\n\n          case 5:\n            response = _context4.sent;\n            _context4.next = 8;\n            return response.json();\n\n          case 8:\n            value = _context4.sent;\n            return _context4.abrupt(\"return\", value);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n\n  return function fetchCentral(_x4, _x5, _x6) {\n    return _ref9.apply(this, arguments);\n  };\n}();\n\nexports.fetchCentral = fetchCentral;\n\nvar destroyModel =\n/*#__PURE__*/\nfunction () {\n  var _ref11 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee5(model) {\n    var _ref12, apiServer, queryString, url, response, data;\n\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _ref12 = (0, _config.getConfig)(), apiServer = _ref12.apiServer;\n            queryString = (0, _qs.stringify)({\n              signature: model.attrs.radiksSignature\n            });\n            url = \"\".concat(apiServer, \"/radiks/models/\").concat(model._id, \"?\").concat(queryString);\n            _context5.next = 5;\n            return fetch(url, {\n              method: 'DELETE'\n            });\n\n          case 5:\n            response = _context5.sent;\n            _context5.next = 8;\n            return response.json();\n\n          case 8:\n            data = _context5.sent;\n            console.log(data);\n            return _context5.abrupt(\"return\", data.success);\n\n          case 11:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n\n  return function destroyModel(_x7) {\n    return _ref11.apply(this, arguments);\n  };\n}();\n\nexports.destroyModel = destroyModel;","map":null,"metadata":{},"sourceType":"script"}