"use strict";

exports.__esModule = true;
exports.PubkeyHashSigner = void 0;

var _bitcoinjsLib = _interopRequireDefault(require("bitcoinjs-lib"));

var _utils = require("../utils");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Class representing a transaction signer for pubkeyhash addresses
 * (a.k.a. single-sig addresses)
 * @private
 */
class PubkeyHashSigner {
  constructor(ecPair) {
    this.ecPair = ecPair;
  }

  static fromHexString(keyHex) {
    return new PubkeyHashSigner((0, _utils.hexStringToECPair)(keyHex));
  }

  signerVersion() {
    return 1;
  }

  getAddress() {
    return Promise.resolve().then(() => (0, _utils.ecPairToAddress)(this.ecPair));
  }

  signTransaction(transaction, inputIndex) {
    return Promise.resolve().then(() => {
      transaction.sign(inputIndex, this.ecPair);
    });
  }

}

exports.PubkeyHashSigner = PubkeyHashSigner;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb25zL3NpZ25lcnMuanMiXSwibmFtZXMiOlsiUHVia2V5SGFzaFNpZ25lciIsImNvbnN0cnVjdG9yIiwiZWNQYWlyIiwiZnJvbUhleFN0cmluZyIsImtleUhleCIsInNpZ25lclZlcnNpb24iLCJnZXRBZGRyZXNzIiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwic2lnblRyYW5zYWN0aW9uIiwidHJhbnNhY3Rpb24iLCJpbnB1dEluZGV4Iiwic2lnbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQTs7QUFDQTs7OztBQXVCQTs7Ozs7QUFLTyxNQUFNQSxnQkFBTixDQUFvRDtBQUd6REMsRUFBQUEsV0FBVyxDQUFDQyxNQUFELEVBQTJCO0FBQ3BDLFNBQUtBLE1BQUwsR0FBY0EsTUFBZDtBQUNEOztBQUVELFNBQU9DLGFBQVAsQ0FBcUJDLE1BQXJCLEVBQXFDO0FBQ25DLFdBQU8sSUFBSUosZ0JBQUosQ0FBcUIsOEJBQWtCSSxNQUFsQixDQUFyQixDQUFQO0FBQ0Q7O0FBRURDLEVBQUFBLGFBQWEsR0FBVztBQUN0QixXQUFPLENBQVA7QUFDRDs7QUFFREMsRUFBQUEsVUFBVSxHQUFvQjtBQUM1QixXQUFPQyxPQUFPLENBQUNDLE9BQVIsR0FDSkMsSUFESSxDQUNDLE1BQU0sNEJBQWdCLEtBQUtQLE1BQXJCLENBRFAsQ0FBUDtBQUVEOztBQUVEUSxFQUFBQSxlQUFlLENBQUNDLFdBQUQsRUFBNENDLFVBQTVDLEVBQWdGO0FBQzdGLFdBQU9MLE9BQU8sQ0FBQ0MsT0FBUixHQUNKQyxJQURJLENBQ0MsTUFBTTtBQUNWRSxNQUFBQSxXQUFXLENBQUNFLElBQVosQ0FBaUJELFVBQWpCLEVBQTZCLEtBQUtWLE1BQWxDO0FBQ0QsS0FISSxDQUFQO0FBSUQ7O0FBekJ3RCIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5pbXBvcnQgYml0Y29pbmpzIGZyb20gJ2JpdGNvaW5qcy1saWInXG5pbXBvcnQgeyBoZXhTdHJpbmdUb0VDUGFpciwgZWNQYWlyVG9BZGRyZXNzIH0gZnJvbSAnLi4vdXRpbHMnXG5cbmV4cG9ydCBpbnRlcmZhY2UgVHJhbnNhY3Rpb25TaWduZXIge1xuICAvKipcbiAgICogQHJldHVybnMgdmVyc2lvbiBudW1iZXIgb2YgdGhlIHNpZ25lciwgY3VycmVudGx5LCBzaG91bGQgYWx3YXlzIGJlIDFcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNpZ25lclZlcnNpb24oKTogbnVtYmVyO1xuICAvKipcbiAgICogQHJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0cmFuc2FjdGlvbiBzaWduZXIncyBhZGRyZXNzXG4gICAqICh1c3VhbGx5IEJhc2U1OCBjaGVjayBlbmNvZGluZylcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEFkZHJlc3MoKTogUHJvbWlzZTxzdHJpbmc+O1xuICAvKipcbiAgICogU2lnbnMgYSB0cmFuc2FjdGlvbiBpbnB1dFxuICAgKiBAcGFyYW0ge1RyYW5zYWN0aW9uQnVpbGRlcn0gdHJhbnNhY3Rpb24gLSB0aGUgdHJhbnNhY3Rpb24gdG8gc2lnblxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5wdXRJbmRleCAtIHRoZSBpbnB1dCBvbiB0aGUgdHJhbnNhY3Rpb24gdG8gc2lnblxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2lnblRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uOiBiaXRjb2luanMuVHJhbnNhY3Rpb25CdWlsZGVyLCBpbnB1dEluZGV4OiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+O1xufVxuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHRyYW5zYWN0aW9uIHNpZ25lciBmb3IgcHVia2V5aGFzaCBhZGRyZXNzZXNcbiAqIChhLmsuYS4gc2luZ2xlLXNpZyBhZGRyZXNzZXMpXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY2xhc3MgUHVia2V5SGFzaFNpZ25lciBpbXBsZW1lbnRzIFRyYW5zYWN0aW9uU2lnbmVyIHtcbiAgZWNQYWlyOiBiaXRjb2luanMuRUNQYWlyXG5cbiAgY29uc3RydWN0b3IoZWNQYWlyOiBiaXRjb2luanMuRUNQYWlyKSB7XG4gICAgdGhpcy5lY1BhaXIgPSBlY1BhaXJcbiAgfVxuXG4gIHN0YXRpYyBmcm9tSGV4U3RyaW5nKGtleUhleDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBQdWJrZXlIYXNoU2lnbmVyKGhleFN0cmluZ1RvRUNQYWlyKGtleUhleCkpXG4gIH1cblxuICBzaWduZXJWZXJzaW9uKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIGdldEFkZHJlc3MoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgIC50aGVuKCgpID0+IGVjUGFpclRvQWRkcmVzcyh0aGlzLmVjUGFpcikpXG4gIH1cblxuICBzaWduVHJhbnNhY3Rpb24odHJhbnNhY3Rpb246IGJpdGNvaW5qcy5UcmFuc2FjdGlvbkJ1aWxkZXIsIGlucHV0SW5kZXg6IG51bWJlcikgOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgdHJhbnNhY3Rpb24uc2lnbihpbnB1dEluZGV4LCB0aGlzLmVjUGFpcilcbiAgICAgIH0pXG4gIH1cbn1cbiJdfQ==